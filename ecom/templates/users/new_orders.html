{% extends 'base.html' %}
{% load static %}
{% block content %}

<style>
    /* GLOBAL THEME (Light + Dark Mode Compatible) */
    body {
        font-family: "Poppins", sans-serif !important;
        background: var(--bg);
        color: var(--text);
        transition: 0.3s ease;
    }

    /* Light Theme Colors */
    :root {
        --bg: #eef2ff;
        --card-bg: rgba(255, 255, 255, 0.75);
        --border: rgba(255, 255, 255, 0.5);
        --text: #1f2937;
        --subtext: #6b7280;
        --shadow: rgba(0, 0, 0, 0.1);
    }

    /* DARK MODE */
    body.dark {
        --bg: #0f172a;
        --card-bg: rgba(30, 41, 59, 0.7);
        --border: rgba(255, 255, 255, 0.15);
        --text: #f8fafc;
        --subtext: #94a3b8;
        --shadow: rgba(0, 0, 0, 0.6);
    }

    /* Container */
    .order-container {
        max-width: 1100px;
        margin: auto;
        padding: 30px;
    }

    /* Title */
    .order-title {
        font-size: 36px;
        font-weight: 800;
        margin-bottom: 25px;
        color: var(--text);
    }

    /* Order Card */
    .order-card {
        background: var(--card-bg);
        border: 1px solid var(--border);
        border-radius: 20px;
        padding: 22px;
        backdrop-filter: blur(12px);
        box-shadow: 0 8px 25px var(--shadow);
        transition: 0.25s ease;
    }
    .order-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 35px var(--shadow);
    }

    /* Header */
    .order-header strong {
        color: var(--text);
        font-size: 22px;
    }

    .order-header small {
        color: var(--subtext);
    }

    /* Status Badge */
    .status-badge {
        padding: 6px 12px;
        font-size: 12px;
        font-weight: 600;
        border-radius: 8px;
        display: inline-block;
    }
    .status-pending {
        background: #fbbf24;
        color: #78350f;
    }

    /* Product Image */
    .product-thumb {
        width: 70px;
        height: 70px;
        border-radius: 14px;
        overflow: hidden;
        border: 1px solid var(--border);
        box-shadow: 0 5px 12px var(--shadow);
    }
    .product-thumb img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    /* Item List */
    .item-list li {
        margin-bottom: 6px;
        font-size: 15px;
        color: var(--text);
    }

    /* Total Price */
    .order-total {
        font-size: 22px;
        font-weight: 800;
        color: var(--text);
    }

    /* Empty State */
    .empty {
        text-align: center;
        padding: 30px;
        font-size: 18px;
        color: var(--subtext);
    }

    /* Dark Mode Toggle Button */
    .toggle-btn {
        position: fixed;
        top: 20px;
        right: 25px;
        background: var(--card-bg);
        border: 1px solid var(--border);
        padding: 8px 14px;
        border-radius: 10px;
        cursor: pointer;
        font-size: 14px;
        color: var(--text);
        backdrop-filter: blur(10px);
        transition: 0.3s ease;
        box-shadow: 0 5px 15px var(--shadow);
    }
</style>

<!-- Dark Mode Button -->
<button class="toggle-btn" onclick="toggleDark()">ðŸŒ™ Dark Mode</button>

<script>
    function toggleDark() {
        document.body.classList.toggle("dark");
        document.querySelector(".toggle-btn").textContent =
            document.body.classList.contains("dark") ? "â˜€ Light Mode" : "ðŸŒ™ Dark Mode";
    }
</script>

<div class="order-container">

    <h2 class="order-title">ðŸ“¦ New Orders</h2>

    {% if orders %}
        <div class="row g-4">

            {% for order in orders %}
            <div class="col-12">
                <div class="order-card">

                    <!-- Header -->
                    <div class="d-flex justify-content-between align-items-center order-header">
                        <div>
                            <strong>Order #{{ order.id }}</strong>
                            <span class="status-badge status-pending ms-2">
                                {{ order.get_status_display }}
                            </span>
                        </div>
                        <small>{{ order.created_at|date:"Y-m-d H:i" }}</small>
                    </div>

                    <!-- Items Section -->
                    <div class="row mt-3 align-items-start">

                        <!-- Images -->
                        {% for item in order.items.all %}
                        <div class="col-auto">
                            <div class="product-thumb">
                                <img src="{{ item.product.image.url }}" alt="">
                            </div>
                        </div>
                        {% endfor %}

                        <!-- Item Names -->
                        <div class="col">
                            <ul class="list-unstyled item-list">
                                {% for item in order.items.all %}
                                <li>
                                    <strong>{{ item.product.name }}</strong> Ã— {{ item.quantity }}
                                    â€” â‚¹{{ item.price }}
                                </li>
                                {% endfor %}
                            </ul>
                        </div>

                        <!-- Total -->
                        <div class="col-auto text-end">
                            <div class="order-total">
                                Total: â‚¹{{ order.total }}
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            {% endfor %}

        </div>

    {% else %}
        <div class="empty">No new orders.</div>
    {% endif %}

</div>

{% endblock %}
